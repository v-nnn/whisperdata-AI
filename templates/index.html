{% extends "layout.html" %}
{% block body %}
   <style>
        .loading {
        background-color: #ff4444 !important;
        animation: pulse 1.5s infinite;
        pointer-events: none;
    }

    @keyframes pulse {
        0% { opacity: 0.6; }
        50% { opacity: 1; }
        100% { opacity: 0.6; }
    }

    table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    font-family: Arial, sans-serif;
    font-size: 14px;
    }

    th {
        background-color: #4CAF50;
        color: white;
        padding: 6px;
        text-align: left;
        border: 1px solid #ddd;
    }

    td {
        padding: 4px 6px;
        border: 1px solid #ddd;
    }

    tr:nth-child(even) {
        background-color: #f2f2f2;
    }

    tr:hover {
        background-color: #f5f5f5;
    }

    </style>

    <h3>Upload your CSV file</h3>
    <form id="submit" action="/upload-csv" method="POST" enctype="multipart/form-data">
        <label for="csv">Upload CSV File for AI Analysis</label>
        <input type="file" id="csvFile" name="file" accept=".csv">
        <button id="uploadButton" type="submit">Upload</button>
    </form>
    
    <div id="chatContainer" style="display: none;">
    <h3>AI Data Transformation</h3>
    <div style="display: flex; gap: 100px;">
        <!-- Left side: Command input -->
        <div style="flex: 1;">
            <h4>Command:</h4>
            <input type="text" id="commandInput" placeholder="Type your transformation command..." style="width: 95%; padding: 20px; margin-bottom: 10px;">
            <button id="submitCommand" style="padding: 10px 20px;">Transform Data</button>
            <button id="downloadButton" style="padding: 10px 20px; background-color: #4CAF50; color: white; border: none; cursor: pointer;">Download CSV</button>
        </div>
         
        <!-- Right side: Explanation display -->
        <div style="flex: 1;">
            <h4>AI Explanation:</h4>
            <textarea id="explanationDisplay" readonly style="width: 95%; height: 34px; padding: 10px; background-color: #f5f5f5;" placeholder="AI explanation will appear here..."></textarea>
        </div>
    </div>

    <div id="csvTable"></div>
    <script src="/static/scripts/main.js"></script> <!-- Reference javascript after all HTML elements have finished loading -->
{% endblock %}